setTimeout(function(){new SkewSlider({el:document.getElementById("rx-write1"),angle:15,interval:3E3,duration:1E3,sources:["./fixture/slide1.jpg","./fixture/slide2.jpg","./fixture/slide3.jpg"]});var n=document.getElementById("rx-write2"),p=new CircleRipper(n),l=new XMLHttpRequest;l.open("GET","fixture/data-url.txt");l.addEventListener("load",function a(){l.removeEventListener("load",a);p.addImage(l.responseText)});l.send();(function(){"normal multiply screen overlay darken lighten color-dodge color-burn hard-light soft-light difference exclusion hue saturation color luminosity clear copy source-over destination-over source-in destination-in source-out destination-out source-atop destination-atop xor lighter".split(" ").forEach(function(a,
b){var c=document.getElementById("ex-blend"+(1+b)).getContext("2d");c.fillStyle="rgba(0, 0, 255, .6)";c.fillRect(10,10,60,60);c.globalCompositeOperation=a;c.fillStyle="rgba(255, 0, 0, .6)";c.fillRect(30,30,60,60)})})();(function(){var a=document.getElementById("ex-arc1").getContext("2d");a.strokeStyle="orange";a.beginPath();a.lineWidth=5;a.arc(220,80,20,0,360*Math.PI/180);a.stroke()})();(function(){var a=document.getElementById("ex-arc2").getContext("2d");a.fillStyle="orange";a.beginPath();a.arc(220,
80,20,0,360*Math.PI/180);a.fill()})();(function(){var a,b;function c(){cancelAnimationFrame(g);h.clearRect(0,0,h.canvas.width,h.canvas.height);a=0;b=h.canvas.height/2-30}function k(b){b&&h.clearRect(0,0,h.canvas.width,h.canvas.height);d();a+=2;a<h.canvas.width-60&&(g=requestAnimationFrame(function(){k(b)}))}function d(){h.save();h.fillStyle="#f33";h.fillRect(a,b,60,60);h.restore()}var h=document.getElementById("ex-animation1").getContext("2d"),e=document.getElementById("ex-animation1-run1"),f=document.getElementById("ex-animation1-run2");
a=0;b=h.canvas.height/2-30;var g=null;d();e.addEventListener("click",function(){c();k(!0)});f.addEventListener("click",function(){c();k(!1)})})();(function(){function a(){c.clearRect(0,0,c.canvas.width,c.canvas.height);b();g.x+=e;g.x<c.canvas.width-g.size&&(m=setTimeout(a,f))}function b(){c.save();c.fillStyle="#f33";c.fillRect(g.x,g.y,g.size,g.size);c.restore()}var c=document.getElementById("ex-anim1").getContext("2d"),k=document.getElementById("ex-anim1-run"),d=document.getElementById("ex-anim1-run2"),
h=document.getElementById("ex-anim1-run3"),e=20,f=500,g={x:0,y:c.canvas.height/2-20,size:60},m=null;b();k.addEventListener("click",function(){cancelAnimationFrame(m);g.x=0;e=20;f=500;a()},!1);d.addEventListener("click",function(){cancelAnimationFrame(m);g.x=0;e=4;f=1E3/15;a()},!1);h.addEventListener("click",function(){cancelAnimationFrame(m);g.x=0;e=1.5;f=1E3/60;a()},!1)})();(function(){var a=document.getElementById("ex-rect4").getContext("2d");a.lineWidth=2;a.setLineDash([4,4]);a.beginPath();a.strokeStyle=
"rgba(0, 0, 0, .5)";a.moveTo(140,70);a.lineTo(190,70);a.lineTo(190,120);a.lineTo(140,120);a.closePath();a.stroke()})();document.getElementById("ex-rect1").getContext("2d").fillRect(140,70,50,50);(function(){var a=document.getElementById("ex-rect6").getContext("2d");a.fillStyle="orange";a.fillRect(140,70,50,50)})();document.getElementById("ex-rect5").getContext("2d").fillRect(140,70,50,50);(function(){var a=document.getElementById("ex-up1").getContext("2d"),b,c;c=b=10;setTimeout(function d(){a.clearRect(0,
0,a.canvas.width,a.canvas.height);if(b>=a.canvas.width||c>=a.canvas.height)b=c=10;b+=20;c+=15;a.save();a.beginPath();a.fillStyle="orange";a.arc(b,c,20,0,360*Math.PI/180);a.fill();a.restore();a.font="30px sans-serif";a.textAlign="right";a.textBaseline="bottom";a.fillText("("+b+", "+c+")",a.canvas.width-10,a.canvas.height-10);setTimeout(d,800)})})();(function(){var a=document.getElementById("ex-up2").getContext("2d"),b,c,k,d;c=b=30;k=4;d=3;requestAnimationFrame(function e(){a.clearRect(0,0,a.canvas.width,
a.canvas.height);if(20>=b||b>=a.canvas.width-20)k*=-1;if(20>=c||c>=a.canvas.height-20)d*=-1;b+=k;c+=d;a.save();a.beginPath();a.fillStyle="orange";a.arc(b,c,20,0,360*Math.PI/180);a.fill();a.restore();a.font="30px sans-serif";a.textAlign="right";a.textBaseline="bottom";a.fillText("vx = "+k,a.canvas.width-10,a.canvas.height-40);a.fillText("vy = "+d,a.canvas.width-10,a.canvas.height-10);requestAnimationFrame(e)})})();(function(){var a=document.getElementById("ex-hit1").getContext("2d");a.fillStyle="LightGreen";
a.fillRect(40,40,40,40);a.fillStyle="LightCoral";a.fillRect(420,180,40,80);a.fillStyle="LightBlue";a.arc(180,200,30,0,360*Math.PI/180,!1);a.fill()})();(function(){var a=document.getElementById("ex-hit2").getContext("2d");a.fillStyle="LightGreen";a.fillRect(40,40,40,40);a.fillStyle="LightCoral";a.fillRect(420,180,40,80);a.fillStyle="LightBlue";a.arc(180,200,30,0,360*Math.PI/180,!1);a.fill()})();(function(){var a=document.getElementById("ex-hit3").getContext("2d");a.fillStyle="LightGreen";a.fillRect(40,
40,40,40);a.fillStyle="LightCoral";a.fillRect(420,180,40,80);a.fillStyle="LightBlue";a.arc(180,200,30,0,360*Math.PI/180,!1);a.fill()})();(function(){var a=document.getElementById("ex-rect2").getContext("2d");a.fillRect(140,70,50,50);a.font="18px sans-serif";a.textAlign="center";a.textBaseline="top";a.lineWidth=4;for(var b=0;b<a.canvas.width;b+=20)a.beginPath(),a.moveTo(b+.5,.5),a.lineTo(b+.5,10.5),a.closePath(),a.stroke(),b&&0===b%40&&a.fillText(b,b,14);a.textBaseline="middle";for(b=0;b<a.canvas.height;b+=
20)a.beginPath(),a.moveTo(.5,b+.5),a.lineTo(10.5,b+.5),a.closePath(),a.stroke(),b&&0===b%40&&a.fillText(b,30,b)})();(function(){var a=document.getElementById("ex-rect3").getContext("2d"),b=0;a.font="18px sans-serif";a.textAlign="center";a.textBaseline="top";requestAnimationFrame(function k(){a.clearRect(0,0,a.canvas.width,a.canvas.height);a.fillRect(140,70,50,50);a.save();a.strokeStyle="rgba(255, 0, 0, .8)";a.lineDashOffset=b-=.2;a.setLineDash([4,4]);a.beginPath();a.moveTo(140.5,.5);a.lineTo(140.5,
70.5);a.moveTo(.5,70.5);a.lineTo(140.5,70.5);a.stroke();a.restore();a.lineWidth=4;a.save();for(var d=0;d<a.canvas.width;d+=20)a.beginPath(),a.moveTo(d+.5,.5),a.lineTo(d+.5,10.5),a.closePath(),a.stroke(),d&&0===d%40&&a.fillText(d,d,14);a.textBaseline="middle";for(d=0;d<a.canvas.height;d+=20)a.beginPath(),a.moveTo(.5,d+.5),a.lineTo(10.5,d+.5),a.closePath(),a.stroke(),d&&0===d%40&&a.fillText(d,30,d);a.restore();requestAnimationFrame(k)})})();(function(){var a=document.getElementById("ex-ph1").getContext("2d"),
b=function(a,b,c,e){this.x=a;this.y=b;this.dx=c;this.dy=e;this.radius=60;this.color="#333"};b.isCollision=function(a,b){return(b.x-a.x)*(b.x-a.x)+(b.y-a.y)*(b.y-a.y)<(a.radius+b.radius)*(a.radius+b.radius)};b.refrect=function(a,b){var c=b.x-a.x,e=b.y-a.y,f;f=-(c*a.dx+e*a.dy)/(c*c+e*e);var g=a.dx+c*f,m=a.dy+e*f;f=-(-e*a.dx+c*a.dy)/(e*e+c*c);var l=a.dx-e*f,q=a.dy+c*f;f=-(c*b.dx+e*b.dy)/(c*c+e*e);var n=b.dx+c*f,p=b.dy+e*f;f=-(-e*b.dx+c*b.dy)/(e*e+c*c);e=b.dx-e*f;c=b.dy+c*f;f=(l+e+1*e-1*l)/2;var r=(q+
c+1*c-1*q)/2;a.dx=f+g;a.dy=r+m;b.dx=-1*(e-l)+f+n;b.dy=-1*(c-q)+r+p};b.prototype.render=function(a){a.save();a.beginPath();a.fillStyle=this.color;a.arc(this.x,this.y,this.radius,0,2*Math.PI,!1);a.fill();a.restore()};b.prototype.update=function(){this.x+=this.dx;this.y+=this.dy;this.x<=this.radius?(this.dx*=-1,console.log(this.radius),this.x=this.radius):this.x>=a.canvas.width-this.radius&&(this.dx*=-1,this.x=a.canvas.width-this.radius);this.y<=this.radius?(this.dy*=-1,this.y=this.radius):this.y>=a.canvas.height-
this.radius&&(this.dy*=-1,this.y=a.canvas.height-this.radius)};var c=[];c.push(new b(100,200,5,2));c.push(new b(400,80,3,5));c.forEach(function(b){b.render(a)});document.getElementById("ex-ph1-run").addEventListener("click",function d(){a.clearRect(0,0,a.canvas.width,a.canvas.height);c.forEach(function(b){b.update();b.render(a)});b.isCollision(c[0],c[1])&&b.refrect(c[0],c[1]);requestAnimationFrame(d)},!1)})()},1E3);
