<html>
<head>
<meta charset="utf-8">
<title>ä»Šæ—¥ã‹ã‚‰å§‹ã‚ã‚‹HTML5 Canvas</title>
<link rel="stylesheet" href="./dist/talkie.min.css">
<link rel="stylesheet" href="./dist/talkie-default.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/monokai_sublime.min.css">
<link rel="stylesheet" href="fixture/style.css">
</head>
<body>

<template layout="cover" invert backface="fixture/image-backface.jpg" backface-filter="blur(1px) brightness(.5)" type="text/x-markdown">
# ä»Šæ—¥ã‹ã‚‰å§‹ã‚ã‚‹ HTML5 Canvas

<p style="font-size: 1.4em; text-align: right;">
ã¨ã€ã‚³ãƒ©ãƒœç‰¹åˆ¥ç·¨ Webã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼æ–°å¹´ä¼š featuringã¾ã¼ã‚ã—<br>
2016å¹´1æœˆ9æ—¥<br>
<br>
ã¾ã¼ã‚ã— ç¤’ç”°å„ª</p>
</template>

<template class="profile" layout="bullets" type="text/x-markdown">
<img class="profile-round" src="fixture/image-profile.jpg" alt="">

<ruby style="font-size: 1.125em">ç¤’ç”°<rt>ã„ãã </rt></ruby> <ruby style="font-size: 1.125em">å„ª<rt>ã‚†ã†</rt></ruby><br>
ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢

<div class="profile-summary">

**1993å¹´**ã€**æ„›çŸ¥çœŒ**ç”Ÿã¾ã‚Œã€‚

åå¤å±‹ã®å°‚é–€å­¦æ ¡ã§Webãƒ‡ã‚¶ã‚¤ãƒ³ã‚’å­¦ã³ã€<br>2014å¹´3æœˆã«æ ªå¼ä¼šç¤¾ã¾ã¼ã‚ã—ã«æ–°å’ã§å…¥ç¤¾ã€‚

å¥½ããªã‚‚ã®ï¼š**ãŠé…’**ã€è¾›ã„ã‚‚ã®ãªã©

<p style="text-align: center;"><a href="https://maboroshi.biz/staff/isoda.html">maboroshi.biz/staff/isoda.html</a></p>
</div>
</template>

<template layout="bullets" type="text/x-markdown">
### æ¦‚è¦

- Canvasã®åŸºæœ¬
- Canvasã§ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã§è¦šãˆã‚‹Canvas
- Canvasã®å­¦ç¿’æ–¹æ³•
</template>

<template layout type="text/x-markdown">
### ç›®çš„

ã€ŒCanvasã‚’ä½¿ã£ãŸã“ã¨ãŒãªã„äººã«èˆˆå‘³ã‚’æŒã£ã¦ã‚‚ã‚‰ã†ã€
</template>

<template layout="title" type="text/x-markdown">
## Canvasã®åŸºæœ¬
</template>

<template layout type="text/x-markdown">
### Canvasã®åŸºæœ¬

JavaScriptã‚’ä½¿ã£ã¦ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’å‹•çš„ã«æ‰±ãˆã‚‹è¦ç´ 
</template>

<template layout type="text/x-markdown">
### Canvasã®åŸºæœ¬

ãƒ–ãƒ©ã‚¦ã‚¶ã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãªãä½¿ãˆã‚‹
</template>

<template layout type="text/x-markdown">
### Canvasã®åŸºæœ¬

2D Canvasã®æ©Ÿèƒ½ã¯ã»ã¼å…¨ã¦ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚µãƒãƒ¼ãƒˆ

<a href="http://caniuse.com/#feat=canvas">![](fixture/image-ss10.png)</a>
</template>

<template layout type="text/x-markdown">
### Canvasã®åŸºæœ¬

WebGLã‚’ä½¿ã†ã“ã¨ã§3Dè¡¨ç¾ã‚‚å¯èƒ½
</template>

<template layout backface="fixture/image-ss11.png" backface-filter="blur(1px) brightness(.5)" type="text/x-markdown">
<a href="http://www.littleworkshop.fr/renaultespace/" class="button">Renault Espace Visualization</a>
</template>

<template layout backface="fixture/image-ss09.png" type="text/x-markdown">
<a href="https://kamra.invisi-dir.com/" class="button">KAMRA-Deja-Vu</a>
</template>

<template layout type="text/x-markdown">
### Canvasã®åŸºæœ¬

WebGLã®ã‚µãƒãƒ¼ãƒˆçŠ¶æ³

<a href="http://caniuse.com/#feat=canvas">![](fixture/image-ss03.png)</a>
</template>

<template layout type="text/x-markdown">
## 2D Canvasã§ã§ãã‚‹ã“ã¨
</template>

<template layout="bullets" type="text/x-markdown">
### 2D Canvasã§ãã‚‹ã“ã¨

<blockquote>
<div style="display: flex">
<div style="margin: 0 40px">

- çŸ©å½¢ã®æç”»
- æ–‡å­—åˆ—ã®æç”»
- ç·šã®ã‚¹ã‚¿ã‚¤ãƒ«
- æ–‡å­—åˆ—ã®ã‚¹ã‚¿ã‚¤ãƒ«
- å¡—ã‚Šã¨ç·šã®ã‚¹ã‚¿ã‚¤ãƒ«
- ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒ‘ã‚¿ãƒ¼ãƒ³
- å½±ã®ã‚¹ã‚¿ã‚¤ãƒ«
</div>
<div style="margin: 0 40px">

- ãƒ‘ã‚¹ã®ä½œæˆ
- ãƒ‘ã‚¹ã‚’æç”»ã™ã‚‹
- å›³å½¢ã®å¤‰å½¢
- é€æ˜åº¦ã¨åˆæˆ
- ç”»åƒã®æç”»
- ãƒ”ã‚¯ã‚»ãƒ«æ“ä½œ
- ç”»åƒã®å¹³æ»‘åŒ–
- ã‚­ãƒ£ãƒ³ãƒã‚¹ã®çŠ¶æ…‹
</div>
</div>

<a href="https://developer.mozilla.org/ja/docs/Web/API/CanvasRenderingContext2D">CanvasRenderingContext2D - Web API ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ | MDN</a>
</blockquote>
</template>

<template backface="fixture/image-ss05.png" backface-filter="blur(1px) brightness(.6)" layout type="text/x-markdown">
<a href="http://codepen.io/isoden/full/KVaeYY" class="button">2D Canvasã§ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«è¡¨ç¾</a>
</template>

<template layout="bullets" type="text/x-markdown">
### å°ã¾ã¨ã‚

- ãƒ–ãƒ©ã‚¦ã‚¶ã‚µãƒãƒ¼ãƒˆã¯ã»ã¼å•é¡Œãªã„
- ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãªã©ã«ä¾å­˜ã›ãšä½¿ã†ã“ã¨ãŒã§ãã‚‹
- WebGLã§3Dè¡¨ç¾ã‚‚ã§ãã‚‹
- ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ã€ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ç”¨ã„ã‚‰ã‚Œã‚‹
</template>

<template layout type="text/x-markdown">
## Canvasã§ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
</template>

<template layout type="text/x-markdown">
### ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®æ–¹æ³•

Canvasè‡ªä½“ã«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ä»•çµ„ã¿ã¯å®šç¾©ã•ã‚Œã¦ã„ãªã„
</template>

<template layout type="text/x-markdown">
### ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®æ–¹æ³•

DOMã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚ˆã†ã«ã€å‹•ã‹ã—ãŸã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’<br>å°‘ã—ãšã¤ç§»å‹•ã•ã›ã‚‹ (ã„ã‚ã‚†ã‚‹ã‚³ãƒé€ã‚Š)

<canvas id="ex-anim1" width="600" height="300"></canvas>
<p>
  <button id="ex-anim1-run">ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‘</button>
  <button id="ex-anim1-run2">ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼’</button>
  <button id="ex-anim1-run3">ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼“</button>
</p>
</template>

<template layout type="text/x-markdown">
### ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®æ–¹æ³•

æç”»å†…å®¹ã®ã‚¯ãƒªã‚¢ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æç”»ã‚’ç¹°ã‚Šè¿”ã—è¡Œã†ã€‚

<canvas id="ex-animation1" width="600" height="300"></canvas>
<p>
  <button id="ex-animation1-run2">ã‚¯ãƒªã‚¢ãªã—</button>
  <button id="ex-animation1-run1">ã‚¯ãƒªã‚¢ã‚ã‚Š</button>
</p>

</template>

<template layout="code" type="text/x-markdown">
### ã‚¿ã‚¤ãƒãƒ¼ã‚’ç”¨ã„ã‚‹æ–¹æ³•

`setInterval` ã‚„ `setTimeout` ãªã©ã®ã‚¿ã‚¤ãƒãƒ¼API

```javascript
var pos = {x : 0, y : 0};

// 60fps(16.666666667ãƒŸãƒªç§’ã”ã¨)ã®é–“éš”ã§ç¹°ã‚Šè¿”ã™
setInterval(function animate() {
  renderingCtx.clearRect(0, 0, canvaNode.width, canvasNode.height);

  pos.x += 1;
  renderingCtx.fillRect(pos.x, pos.y, 100, 100);
}, 1000 / 60);
```
</template>

<template layout="code" type="text/x-markdown">
### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå„ªã‚Œã¦ã„ã‚‹æ–¹æ³•

requestAnimationFrameã‚’ä½¿ã†

```javascript
var pos = {x : 0, y : 0};

function animate() {
  renderingCtx.clearRect(0, 0, canvaNode.width, canvasNode.height);

  pos.x += 1;
  renderingCtx.fillRect(pos.x, pos.y, 100, 100);

  // ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã«animateè‡ªèº«ã‚’æŒ‡å®šã—ã¦ã€ãƒ«ãƒ¼ãƒ—ã§å‘¼ã³å‡ºã™
  requestAnimationFrame(animate);
}

animate();
```
</template>

<template layout type="text/x-markdown">
### requestAnimationFrame

ãƒ–ãƒ©ã‚¦ã‚¶ãŒãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆã‚’æ±ºå®šã™ã‚‹

ç„¡ç†ãªãæç”»ã§ãã‚‹ãŒã€å®Ÿè¡Œé–“éš”ã¯ä¿è¨¼ã•ã‚Œã¦ã„ãªã„
</template>

<template layout="bullets" type="text/x-markdown">
### å°ã¾ã¨ã‚

- Canvasã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã‚¯ãƒªã‚¢ã—ã¦å†æç”»ã®ç¹°ã‚Šè¿”ã—
- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¯ã€ã‚¿ã‚¤ãƒãƒ¼APIã§ã¯ãªãã€requestAnimationFrameã‚’ä½¿ã†
</template>

<template layout type="text/x-markdown">
### ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã§è¦šãˆã‚‹Canvas

<a href="http://codepen.io/isoden/full/KVaeYY">2D Canvasã§ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«è¡¨ç¾</a>
</template>

<template layout="code" type="text/x-markdown">
### Canvasã§ã®æç”»

```javascript
// canvasè¦ç´ ã®å–å¾—
var canvasNode = document.getElementById('canvas');

// æç”»ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®å–å¾—
var renderingCtx = canvasNode.getContext('2d');
```

<div><canvas width="600" height="300"></canvas></div>
</template>

<template layout="code" type="text/x-markdown">
### Canvasã§ã®æç”»

```javascript
// Canvasä¸Šã®(40, 70)ã®åº§æ¨™ã«ç¸¦50pxæ¨ª50pxã®ã‚µã‚¤ã‚ºã§æç”»ã™ã‚‹
renderingCtx.fillRect(140, 70, 50, 50);
```

<div><canvas id="ex-rect1" width="600" height="300"></canvas></div>
</template>



<template layout="code" type="text/x-markdown">
### Canvasã§ã®æç”»

```javascript
// å¡—ã‚Šè‰²ã®æŒ‡å®š
renderingCtx.fillStyle = 'orange';

// Canvasä¸Šã®(40, 70)ã®åº§æ¨™ã«ç¸¦50pxæ¨ª50pxã®ã‚µã‚¤ã‚ºã§æç”»ã™ã‚‹
renderingCtx.fillRect(140, 70, 50, 50);
```

<div><canvas id="ex-rect6" width="600" height="300"></canvas></div>
</template>


<template layout="code" type="text/x-markdown">
### Canvasã§ã®æç”»

```javascript
// ãƒ‘ã‚¹ã®é–‹å§‹
renderingCtx.beginPath();

// ãƒ‘ã‚¹ã®æƒ…å ±ã‚’ä½œæˆ
renderingCtx.rect(140, 70, 50, 50);
```

<div><canvas id="ex-rect4" width="600" height="300"></canvas></div>
</template>

<template layout="code" type="text/x-markdown">
### Canvasã§ã®æç”»

```javascript
// ãƒ‘ã‚¹ã®é–‹å§‹
renderingCtx.beginPath();

// ãƒ‘ã‚¹ã®æƒ…å ±ã‚’ä½œæˆ
renderingCtx.rect(140, 70, 50, 50);

// ãƒ‘ã‚¹ã‚’æç”»
renderingCtx.fill();
```

<div><canvas id="ex-rect5" width="600" height="300"></canvas></div>
</template>


<template layout="code" type="text/x-markdown">
### Canvasã§ã®æç”»

```javascript
// Canvasä¸Šã®(40, 70)ã®åº§æ¨™ã«ç¸¦50pxæ¨ª50pxã®ã‚µã‚¤ã‚ºã§æç”»ã™ã‚‹
renderingCtx.fillRect(140, 70, 50, 50);
```

<div><canvas id="ex-rect2" width="600" height="300"></canvas></div>
</template>

<template layout="code" type="text/x-markdown">
### Canvasã§ã®æç”»

```javascript
// Canvasä¸Šã®(40, 70)ã®åº§æ¨™ã«ç¸¦50pxæ¨ª50pxã®ã‚µã‚¤ã‚ºã§æç”»ã™ã‚‹
renderingCtx.fillRect(140, 70, 50, 50);
```

<div><canvas id="ex-rect3" width="600" height="300"></canvas></div>
</template>

<template layout type="text/x-markdown">
### ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚’ä½œã‚‹æµã‚Œ

<pre style="text-align: center; font-size: 1em;"><p>ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«è‡ªèº«ã¨ãªã‚‹ã‚¯ãƒ©ã‚¹ã‚’å®šç¾©ã™ã‚‹
â†“
è¡¨ç¤ºã•ã›ãŸã„ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã®æ•°ã ã‘ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œã‚‹
â†“
ãƒ«ãƒ¼ãƒ—ã§ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹
â†“
ãƒ«ãƒ¼ãƒ—ã®ä¸­ã§åº§æ¨™æƒ…å ±ã‚’æ›´æ–°ã™ã‚‹</p></pre>
</template>

<template layout="code" type="text/x-markdown">
### Circleã‚¯ãƒ©ã‚¹ã®å®šç¾©

```javascript
/**
 * @class Circle
 * @constructor
 */
function Circle(props) {
  // å¼•æ•°ã®åˆæœŸå€¤ã‚’è¨­å®š
  if (props === undefined) {
    props = {};
  }
  // ...çœç•¥

  this.x      = props.x;      // xåº§æ¨™
  this.y      = props.y;      // yåº§æ¨™
  this.dx     = props.dx;     // xåº§æ¨™ã®ç§»å‹•é‡
  this.dy     = props.dy;     // yåº§æ¨™ã®ç§»å‹•é‡
  this.radius = props.radius; // åŠå¾„
  this.color  = props.color;  // è‰²
  this.mode   = props.mode;   // æç”»ã‚’å¡—ã‚Šã«ã™ã‚‹ã‹ç·šã«ã™ã‚‹ã‹ã®è¨­å®š
}
```

</template>

<template layout="code" type="text/x-markdown">
### Circleã‚¯ãƒ©ã‚¹ã®å®šç¾©

```javascript
/**
 * @class Circle
 * @constructor
 */
function Circle(props) {
  // å¼•æ•°ã®åˆæœŸå€¤ã‚’è¨­å®š
  if (props === undefined) {
    props = {};
  }
  // ...çœç•¥

  this.x      = 40;           // xåº§æ¨™
  this.y      = 120;          // yåº§æ¨™
  this.dx     = 3;            // xåº§æ¨™ã®ç§»å‹•é‡
  this.dy     = -5;           // yåº§æ¨™ã®ç§»å‹•é‡
  this.radius = 10;           // åŠå¾„
  this.color  = 'orange';     // è‰²
  this.mode   = 'fill';       // æç”»ã‚’å¡—ã‚Šã«ã™ã‚‹ã‹ç·šã«ã™ã‚‹ã‹ã®è¨­å®š
}
```
</template>

<template layout="code" type="text/x-markdown">
### Circleã‚¯ãƒ©ã‚¹ã®å®šç¾©

```javascript
Circle.prototype.render = function render(renderingCtx) {
  renderingCtx.save();
    renderingCtx.lineWidth = 2;

    // è‡ªèº«ã®åº§æ¨™æƒ…å ±ã‚’å…ƒã«å††ã®ãƒ‘ã‚¹ã‚’ä½œæˆ
    renderingCtx.beginPath();
    renderingCtx.arc(this.x, this.y, this.radius, 0, 360 * Math.PI / 180);

    if (this.mode === 'fill') {
      renderingCtx.fillStyle = this.color;
      renderingCtx.fill();
    } else if (this.mode === 'stroke') {
      renderingCtx.strokeStyle = this.color;
      renderingCtx.stroke();
    }
  renderingCtx.restore();
};
```
</template>

<template layout="code" type="text/x-markdown">
### å††ã®æç”»

<div>

```javascript
// å¡—ã‚Šè‰²ã®è¨­å®š
renderingCtx.fillStyle = 'orange';

// å††ã®ãƒ‘ã‚¹ã‚’æŒ‡å®š
renderingCtx.beginPath();
// xåº§æ¨™ã€yåº§æ¨™ã€åŠå¾„ã€å††ã®é–‹å§‹ä½ç½®ã€å††ã®çµ‚äº†ä½ç½®
renderingCtx.arc(220, 80, 20, 0, 360 * Math.PI / 180);

// å¡—ã‚Šã¤ã¶ã—
renderingCtx.fill();
```

<canvas id="ex-arc2" width="600" height="300"></canvas>
</div>

</template>



<template layout="code" type="text/x-markdown">
### å††ã®æç”»

<div>

```javascript
// ç·šè‰²ã®è¨­å®š
renderingCtx.strokeStyle = 'orange';

// å††ã®ãƒ‘ã‚¹ã‚’æŒ‡å®š
renderingCtx.beginPath();
// xåº§æ¨™ã€yåº§æ¨™ã€åŠå¾„ã€å††ã®é–‹å§‹ä½ç½®ã€å††ã®çµ‚äº†ä½ç½®
renderingCtx.arc(220, 80, 20, 0, 360 * Math.PI / 180);

// ç·šã®æç”»
renderingCtx.stroke();
```

<canvas id="ex-arc1" width="600" height="300"></canvas>
</div>

</template>


<template layout="code" type="text/x-markdown">
### Circleã‚¯ãƒ©ã‚¹ã®å®šç¾©

```javascript
Circle.prototype.render = function render(renderingCtx) {
  renderingCtx.save();
    renderingCtx.lineWidth = 2;

    // è‡ªèº«ã®åº§æ¨™æƒ…å ±ã‚’å…ƒã«å††ã®ãƒ‘ã‚¹ã‚’ä½œæˆ
    renderingCtx.beginPath();
    renderingCtx.arc(this.x, this.y, this.radius, 0, 360 * Math.PI / 180);

    if (this.mode === 'fill') {
      renderingCtx.fillStyle = this.color;
      renderingCtx.fill();
    } else if (this.mode === 'stroke') {
      renderingCtx.strokeStyle = this.color;
      renderingCtx.stroke();
    }
  renderingCtx.restore();
};
```

</template>

<script layout="code" type="text/x-markdown">
### Circleã‚¯ãƒ©ã‚¹ã®å®šç¾©

```javascript
/**
 * åº§æ¨™ã‚’æ›´æ–°ã™ã‚‹
 * @method update
 */
Circle.prototype.update = function update() {
  // xåº§æ¨™ã¨yåº§æ¨™ã«ç§»å‹•é‡ã‚’åŠ ç®—ã™ã‚‹
  this.x += this.dx;
  this.y += this.dy;

  // xåº§æ¨™ãŒcanvasã®å¤–ã«å‡ºãŸã‚‰ç§»å‹•é‡ã‚’åè»¢ã—ã¦è·³ã­è¿”ã‚Šã•ã›ã‚‹
  if (this.x <= 0 || this.x >= canvasNode.width) {
    this.dx *= -1;
  }

  // yåº§æ¨™ãŒcanvasã®å¤–ã«å‡ºãŸã‚‰ç§»å‹•é‡ã‚’åè»¢ã—ã¦è·³ã­è¿”ã‚Šã•ã›ã‚‹
  if (this.y <= 0 || this.y >= canvasNode.height) {
    this.dy *= -1;
  }
};
```
</script>

<template layout="code" type="text/x-markdown">
### Circleã‚¯ãƒ©ã‚¹ã®å®šç¾©

<div>

```javascript
// xåº§æ¨™ã¨yåº§æ¨™ã®ç§»å‹•é‡
this.dy = 20;
this.dy = 15;

Circle.prototype.update = function update() {
  // xåº§æ¨™ã¨yåº§æ¨™ã«ç§»å‹•é‡ã‚’åŠ ç®—ã™ã‚‹
  this.x += this.dx;
  this.y += this.dy;
  // ... ç•¥
};
```

<canvas id="ex-up1" width="600" height="300"></canvas>
</div>
</template>

<script layout="code" type="text/x-markdown">
### Circleã‚¯ãƒ©ã‚¹ã®å®šç¾©

<div>

```javascript
// xåº§æ¨™ãŒcanvasã®å¤–ã«å‡ºãŸã‚‰ç§»å‹•é‡ã‚’åè»¢ã—ã¦è·³ã­è¿”ã‚Š
if (this.x <= 0 || this.x >= canvasNode.width) {
  this.dx *= -1;
}

// yåº§æ¨™ãŒcanvasã®å¤–ã«å‡ºãŸã‚‰ç§»å‹•é‡ã‚’åè»¢ã—ã¦è·³ã­è¿”ã‚Š
if (this.y <= 0 || this.y >= canvasNode.height) {
  this.dy *= -1;
}
```

<canvas id="ex-up2" width="600" height="300"></canvas>
</div>

</script>

<template layout="code" type="text/x-markdown">
### Circleã‚¯ãƒ©ã‚¹ã®å®šç¾©
```javascript
// Circleã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆ
var circle = new Circle({
  x : 130, y : 50
  // ... ç•¥
});

function animate() {
  renderingCtx.clearRect(0, 0, canvasNode.width, canvasNode.height);

  // æ›´æ–°ã—ã¦æç”»
  circle.update();
  circle.render(renderingCtx);

  requestAnimationFrame(animate);
}

animate();
```

</template>

<template layout="code" type="text/x-markdown">
### å…¨ã¦ã®å¤‰æ•°ã‚’å®šç¾©

```javascript
var canvasNode   = document.getElementById('canvas');
var renderingCtx = canvasNode.getContext('2d');

// ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã®å€‹æ•°
var circleLength = 1000;

// ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ã¾ã¨ã‚ã¦ãŠãé…åˆ—
var circles      = [];

// æç”»ã®ç¨®é¡
var renderModes  = ['stroke', 'fill'];

// ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã®è‰²
var colors       = [
  'hsla(0,   50%, 50%, .5)',
  'hsla(45,  50%, 50%, .5)',
  // ... ç•¥
];
```

</template>

<template layout="code" type="text/x-markdown">
### ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã‚’å®šç¾©

```javascript
// æœ€å°å€¤ã¨æœ€å¤§å€¤ã®ä¸­ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ãªæ•°å€¤ã‚’è¿”ã™
function random(min, max) {
  return Math.round(Math.random() * (max - min) + min);
}

// é…åˆ—ã®ä¸­ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ãªå€¤ã‚’é¸ã¶
function choose(array) {
  return array[Math.floor(Math.random() * array.length)];
}

random(0, 5);      // return 3
choose([1, 2, 3]); // return 2
```
</template>

<template layout="code" type="text/x-markdown">
### åˆæœŸåŒ–å‡¦ç†ã‚’è¡Œã†é–¢æ•°ã®å®šç¾©

```javascript
function init() {
  // canvasè¦ç´ ã‚’windowã¨åŒã˜å¤§ãã•ã«æŒ‡å®š
  canvasNode.width  = window.innerWidth;
  canvasNode.height = window.innerHeight;

  // åˆæˆã®ç¨®é¡ã‚’æŒ‡å®š
  renderingCtx.globalCompositeOperation = 'lighter';

  // circleLengthã®æ•°ã ã‘ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚’ä½œã‚‹
  // ... ç•¥
}
```

</template>

<template layout type="text/x-markdown">
### åˆæˆã¨ã¯

Photoshopã®æç”»ãƒ¢ãƒ¼ãƒ‰ã®ã‚ˆã†ã«ã€<br>é‡ãªã‚Šã®è¡¨ç¤ºæ–¹æ³•ãŒè¨­å®šã§ãã‚‹

</template>

<template layout="code" type="text/x-markdown">
### åˆæˆã®ç¨®é¡ blend-mode

<div style="margin-top: 6px; margin-left: 0;margin-right: 0;">

[blend-modeã®å€¤ãŒ16ç¨®é¡ã€composite-modeã®å€¤ãŒ12ç¨®é¡ä½¿ãˆã‚‹ã€‚](https://drafts.fxtf.org/compositing-1/#canvascompositingandblending)

<div class="blend-example"><canvas id="ex-blend1" width="100" height="100"></canvas>
normal</div>
<div class="blend-example"><canvas id="ex-blend2" width="100" height="100"></canvas>
multiply</div>
<div class="blend-example"><canvas id="ex-blend3" width="100" height="100"></canvas>
screen</div>
<div class="blend-example"><canvas id="ex-blend4" width="100" height="100"></canvas>
overlay</div>
<div class="blend-example"><canvas id="ex-blend5" width="100" height="100"></canvas>
darken</div>
<div class="blend-example"><canvas id="ex-blend6" width="100" height="100"></canvas>
lighten</div>
<div class="blend-example"><canvas id="ex-blend7" width="100" height="100"></canvas>
color-dodge</div>
<div class="blend-example"><canvas id="ex-blend8" width="100" height="100"></canvas>
color-burn</div>
<div class="blend-example"><canvas id="ex-blend9" width="100" height="100"></canvas>
hard-light</div>
<div class="blend-example"><canvas id="ex-blend10" width="100" height="100"></canvas>
soft-light</div>
<div class="blend-example"><canvas id="ex-blend11" width="100" height="100"></canvas>
difference</div>
<div class="blend-example"><canvas id="ex-blend12" width="100" height="100"></canvas>
exclusion</div>
<div class="blend-example"><canvas id="ex-blend13" width="100" height="100"></canvas>
hue</div>
<div class="blend-example"><canvas id="ex-blend14" width="100" height="100"></canvas>
saturation</div>
<div class="blend-example"><canvas id="ex-blend15" width="100" height="100"></canvas>
color</div>
<div class="blend-example"><canvas id="ex-blend16" width="100" height="100"></canvas>
luminosity</div>
</div>
</template>

<template layout="code" type="text/x-markdown">
### åˆæˆã®ç¨®é¡ composite-mode

<div style="margin-top: 6px; margin-left: 0;margin-right: 0;">
<div class="blend-example"><canvas id="ex-blend17" width="100" height="100"></canvas>
clear</div>
<div class="blend-example"><canvas id="ex-blend18" width="100" height="100"></canvas>
copy</div>
<div class="blend-example"><canvas id="ex-blend19" width="100" height="100"></canvas>
source-over</div>
<div class="blend-example"><canvas id="ex-blend20" width="100" height="100"></canvas>
destination-over</div>
<div class="blend-example"><canvas id="ex-blend21" width="100" height="100"></canvas>
source-in</div>
<div class="blend-example"><canvas id="ex-blend22" width="100" height="100"></canvas>
destination-in</div>
<div class="blend-example"><canvas id="ex-blend23" width="100" height="100"></canvas>
source-out</div>
<div class="blend-example"><canvas id="ex-blend24" width="100" height="100"></canvas>
destination-out</div>
<div class="blend-example"><canvas id="ex-blend25" width="100" height="100"></canvas>
source-atop</div>
<div class="blend-example"><canvas id="ex-blend26" width="100" height="100"></canvas>
destination-atop</div>
<div class="blend-example"><canvas id="ex-blend27" width="100" height="100"></canvas>
xor</div>
<div class="blend-example"><canvas id="ex-blend28" width="100" height="100"></canvas>
lighter</div>

</div>
</template>

<template layout type="text/x-markdown">
### åˆæˆã®ã‚µãƒãƒ¼ãƒˆçŠ¶æ³

<a href="http://caniuse.com/#feat=canvas-blending"><img src="fixture/image-ss13.png" alt=""></a>

<blockquote>
  <p><a href="http://caniuse.com/#feat=canvas-blending">Canvas blend modes - Can I Use...</a></p>
</blockquote>
</template>

<script layout="code" type="text/x-markdown">
### åˆæœŸåŒ–å‡¦ç†ã‚’è¡Œã†é–¢æ•°ã®å®šç¾©

```javascript
function init() {
  // canvasè¦ç´ ã‚’windowã¨åŒã˜å¤§ãã•ã«æŒ‡å®š
  canvasNode.width  = window.innerWidth;
  canvasNode.height = window.innerHeight;

  // åˆæˆã®ç¨®é¡ã‚’å¤‰æ›´
  renderingCtx.globalCompositeOperation = 'lighter';

  // circleLengthã®æ•°ã ã‘ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚’ä½œã‚‹
  for (var i = 0; i < circleLength; i += 1) {
    circles.push(new Circle({
      x         : random(0, canvasNode.width),
      y         : random(0, canvasNode.height),
      dx        : random(-5, 5),
      dy        : random(-5, 5),
      radius    : random(4, 12),
      color     : choose(colors),
      mode      : choose(renderModes)
    }));
  }
}
```

</script>

<template layout="code" type="text/x-markdown">
### ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†animateé–¢æ•°ã®å®šç¾©

```javascript
function animate() {
  // ä¸€åº¦æç”»ã‚’ã‚¯ãƒªã‚¢ã—ã¦ã€èƒŒæ™¯ã‚’é»’ã§å¡—ã‚Šã¤ã¶ã™
  renderingCtx.clearRect(0, 0, canvasNode.width, canvasNode.height);

  // å…¨ã¦ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã®æ›´æ–°ã¨æç”»ã‚’å®Ÿè¡Œ
  circles.forEach(function (circle) {
    circle.update();
    circle.render(renderingCtx);
  });

  // animateé–¢æ•°ã‚’ãƒ«ãƒ¼ãƒ—ã§å®Ÿè¡Œã™ã‚‹
  requestAnimationFrame(animate);
}
```
</template>

<template layout="code" type="text/x-markdown">
### ã‚ã¨ã¯å®Ÿè¡Œã™ã‚‹ã ã‘

```javascript
// åˆæœŸåŒ–ã‚’æ¸ˆã¾ã›ã¦ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œ
init();
animate();
```
</template>

<template layout type="text/x-markdown">
### ã“ã®ãã‚‰ã„ãªã‚‰100è¡Œç¨‹ã§å®Ÿè£…ã§ãã‚‹

</template>

<template layout type="text/x-markdown">
### Canvasã®å­¦ç¿’æ–¹æ³•

</template>

<template layout="bullets" type="text/x-markdown">
### CanvasåŸºç¤ã®è¦šãˆæ–¹

<div>
<p><img src="fixture/image-book-cover01.jpg" style="width: 300px" alt=""></p>
</div>

</template>

<template layout type="text/x-markdown">
### å®Ÿè·µçš„ãªãƒ†ã‚¯ãƒ‹ãƒƒã‚¯
</template>

<template layout type="text/x-markdown">
### å®Ÿè·µçš„ãªãƒ†ã‚¯ãƒ‹ãƒƒã‚¯

<canvas id="ex-ph1" width="600" height="300"></canvas>
<p><button id="ex-ph1-run">ã‚¹ã‚¿ãƒ¼ãƒˆ</button></p>
</template>



<template layout backface type="text/x-markdown">
### åŸºç¤ã‚’è¦šãˆãŸã‚‰

ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã¿ã‚‹

</template>

<template layout backface type="text/x-markdown">
### åŸºç¤ã‚’è¦šãˆãŸã‚‰

æ›¸ã„ã¦ã¿ãŸãã®1


<canvas id="rx-write1" width="600" height="300"></canvas>

<a href="https://github.com/isoden/skewslider">github.com/isoden/skewslider</a>

</template>

<template layout backface type="text/x-markdown">
### åŸºç¤ã‚’è¦šãˆãŸã‚‰

æ›¸ã„ã¦ã¿ãŸãã®2

<canvas id="rx-write2" width="600" height="300"></canvas>

<!-- <a disabled href="https://github.com/isoden/circleripper">github.com/isoden/circleripper</a> -->

</template>

<template layout type="text/x-markdown">
### åŸºç¤ã‚’è¦šãˆãŸã‚‰

å®Ÿéš›ã«æ›¸ã„ã¦ã¿ã‚‹ã“ã¨ã§å‹˜æ‰€ãŒã‚ã‹ã‚‹

</template>

<template layout type="text/x-markdown">
### äººã®ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦è¦šãˆã‚‹

</template>

<template layout backface="fixture/image-ss12.png" backface-filter="blur(1px) brightness(.5)" type="text/x-markdown">
<a href="http://codepen.io/" class="button">CodePen</a>

</template>

<template layout="bullets" type="text/x-markdown">
### å°ã¾ã¨ã‚

- åŸºç¤ã‚’è¦šãˆãŸã‚‰ã€ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã¿ã‚‹
- ã™ã”ã„äººã®æ›¸ã„ãŸã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã¿ã‚‹

</template>

<template layout type="text/x-markdown">
### è¦šãˆã¦ãŠããŸã„æ©Ÿèƒ½ addHitRegion

canvasè¦ç´ ã«ãƒ’ãƒƒãƒˆé ˜åŸŸã‚’è¿½åŠ ã™ã‚‹

</template>

<template layout="code" type="text/x-markdown">
### addHitRegionã®ä½¿ã„æ–¹

<canvas id="ex-hit1" width="600" height="300"></canvas>
</template>

<template layout="code" type="text/x-markdown">
### addHitRegionã®ä½¿ã„æ–¹

```javascript
// å›³å½¢ã®æç”»
renderingCtx.beginPath();
renderingCtx.rect(40, 40, 40, 40);
renderingCtx.fill();

// ãƒ’ãƒƒãƒˆé ˜åŸŸã‚’è¿½åŠ 
// regionã®IDã‚’æŒ‡å®šã™ã‚‹
renderingCtx.addHitRegion({id: 'LightGreen'});
```

<canvas id="ex-hit2" width="600" height="300"></canvas>
</template>

<template layout="code" type="text/x-markdown">
### addHitRegionã®ä½¿ã„æ–¹

```javascript
// canvasè¦ç´ è‡ªä½“ã®clickã‚¤ãƒ™ãƒ³ãƒˆã‚’è³¼èª­
canvasNode.addEventListener('click', function (event) {
  // eventã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«regionãŒæ¸¡ã•ã‚Œã‚‹
  if (event.region === 'LightGreen') {
    alert('ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚ˆï¼');
  }
});
```

<canvas id="ex-hit3" width="600" height="300"></canvas>
</template>

<template layout type="text/x-markdown">
### ãƒ–ãƒ©ã‚¦ã‚¶ã‚µãƒãƒ¼ãƒˆã¯ã“ã‚Œã‹ã‚‰

<blockquote style="text-align: center;">
<img src="fixture/image-ss06.png" style="width: 80%" alt="">

<p style="margin: 20px 0 0;"><a href="https://developer.mozilla.org/ja/docs/Web/API/CanvasRenderingContext2D/addHitRegion#.E3.83.96.E3.83.A9.E3.82.A6.E3.82.B6.E3.83.BC.E5.AE.9F.E8.A3.85.E7.8A.B6.E6.B3.81">ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼å®Ÿè£…çŠ¶æ³ CanvasRenderingContext2D.addHitRegion() - Web API ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ | MDN</a></p>
</blockquote>
</template>

<template layout type="text/x-markdown">
### ãŠã‚ã‚Šã«
</template>

<template layout="title" backface="fixture/image-backface2.jpg" backface-filter="blur(1px) brightness(.5)" type="text/x-markdown">
## ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ<br><span style="font-size: .7em; line-height: 2.6"><b style="font-weight: bold;">Let's Enjoy Canvas</b> ğŸ¨</span>
</template>

<template layout="bullets" type="text/x-markdown">
### Thanks

- https://www.flickr.com/photos/moriza/126238618
- https://www.flickr.com/photos/quinndombrowski/5200218267/
</template>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
<script src="./dist/talkie.js"></script>
<script src="fixture/skewslider.js"></script>
<script src="fixture/circleripper.js"></script>
<script src="fixture/index.js"></script>
<script>
  var talkie = Talkie();

  document.addEventListener('DOMContentLoaded', () => {
    talkie.changed.onValue((current) => {
      console.clear();
      // print presenter notes
      console.info(talkie.notes[current.getAttribute('page')]);
    });
  });
</script>
</body>
</html>
